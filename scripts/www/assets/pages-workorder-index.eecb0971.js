import{O as e,P as t,Q as i,R as a,S as n,T as o,d as r,o as s,n as l,w as c,b as u,L as d,U as h,e as p,t as g,E as m,K as f,V as y,f as b,i as _,I as v,W as x,X as S,Y as k,c as w,F as C,m as I,Z as T,A as z,_ as P,$,a0 as N,a1 as L,r as R,D as j,N as B,u as V,l as A,a as F,p as O}from"./index-634fa69d.js";import{_ as D}from"./u-icon.57682e04.js";import{r as H,o as U}from"./uni-app.es.78f2cdc8.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as M}from"./uni-data-select.66b35b24.js";import{_ as W}from"./uni-icons.34e2de6b.js";import{_ as q}from"./u-tag.3fd9e2ae.js";import{_ as K}from"./u-line.68a19bb8.js";import{_ as G}from"./u-button.3f55f15e.js";import{_ as J}from"./uni-card.d07973b2.js";import{g as Q,h as X}from"./orderDetail.18a8c922.js";import{O as Y,g as Z,a as ee,b as te}from"./workorder.a3c585f7.js";import{c as ie}from"./common.c1fe3543.js";import{i as ae}from"./sso.2a000917.js";import{d as ne}from"./index.e8efd85e.js";import"./u-transition.cd342dbb.js";import"./u-loading-icon.09a3efa7.js";import"./request.87fc902a.js";const oe=E({name:"u-search",mixins:[t,i,{props:{shape:{type:String,default:()=>e.search.shape},bgColor:{type:String,default:()=>e.search.bgColor},placeholder:{type:String,default:()=>e.search.placeholder},clearabled:{type:Boolean,default:()=>e.search.clearabled},focus:{type:Boolean,default:()=>e.search.focus},showAction:{type:Boolean,default:()=>e.search.showAction},actionStyle:{type:Object,default:()=>e.search.actionStyle},actionText:{type:String,default:()=>e.search.actionText},inputAlign:{type:String,default:()=>e.search.inputAlign},inputStyle:{type:Object,default:()=>e.search.inputStyle},disabled:{type:Boolean,default:()=>e.search.disabled},borderColor:{type:String,default:()=>e.search.borderColor},searchIconColor:{type:String,default:()=>e.search.searchIconColor},color:{type:String,default:()=>e.search.color},placeholderColor:{type:String,default:()=>e.search.placeholderColor},searchIcon:{type:String,default:()=>e.search.searchIcon},searchIconSize:{type:[Number,String],default:()=>e.search.searchIconSize},margin:{type:String,default:()=>e.search.margin},animation:{type:Boolean,default:()=>e.search.animation},modelValue:{type:String,default:()=>e.search.value},value:{type:String,default:()=>e.search.value},maxlength:{type:[String,Number],default:()=>e.search.maxlength},height:{type:[String,Number],default:()=>e.search.height},label:{type:[String,Number,null],default:()=>e.search.label}}}],data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword(e){this.$emit("update:modelValue",e),this.$emit("change",e)},modelValue:{immediate:!0,handler(e){this.keyword=e}}},computed:{showActionBtn(){return!this.animation&&this.showAction}},emits:["clear","search","custom","focus","blur","click","clickIcon","update:modelValue","change"],methods:{addStyle:a,addUnit:n,inputChange(e){this.keyword=e.detail.value},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")}))},search(e){this.$emit("search",e.detail.value);try{o()}catch(t){}},custom(){this.$emit("custom",this.keyword);try{o()}catch(e){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")},clickIcon(e){this.$emit("clickIcon",this.keyword);try{o()}catch(t){}}}},[["render",function(e,t,i,a,n,o){const x=b,S=H(r("u-icon"),D),k=_,w=v;return s(),l(k,{class:"u-search",onClick:o.clickHandler,style:d([{margin:e.margin},o.addStyle(e.customStyle)])},{default:c((()=>[u(k,{class:"u-search__content",style:d({backgroundColor:e.bgColor,borderRadius:"round"==e.shape?"100px":"4px",borderColor:e.borderColor})},{default:c((()=>[e.$slots.label||null!==e.label?h(e.$slots,"label",{key:0},(()=>[u(x,{class:"u-search__content__label"},{default:c((()=>[p(g(e.label),1)])),_:1})]),!0):m("",!0),u(k,{class:"u-search__content__icon"},{default:c((()=>[u(S,{onClick:o.clickIcon,size:e.searchIconSize,name:e.searchIcon,color:e.searchIconColor?e.searchIconColor:e.color},null,8,["onClick","size","name","color"])])),_:1}),u(w,{"confirm-type":"search",onBlur:o.blur,value:n.keyword,onConfirm:o.search,onInput:o.inputChange,disabled:e.disabled,onFocus:o.getFocus,focus:e.focus,maxlength:e.maxlength,"placeholder-class":"u-search__content__input--placeholder",placeholder:e.placeholder,"placeholder-style":`color: ${e.placeholderColor}`,class:"u-search__content__input",type:"text",style:d([{textAlign:e.inputAlign,color:e.color,backgroundColor:e.bgColor,height:o.addUnit(e.height)},e.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","placeholder","placeholder-style","style"]),n.keyword&&e.clearabled&&n.focused?(s(),l(k,{key:1,class:"u-search__content__icon u-search__content__close",onClick:o.clear},{default:c((()=>[u(S,{name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"})])),_:1},8,["onClick"])):m("",!0)])),_:3},8,["style"]),u(x,{style:d([e.actionStyle]),class:f(["u-search__action",[(o.showActionBtn||n.show)&&"u-search__action--active"]]),onClick:y(o.custom,["stop","prevent"])},{default:c((()=>[p(g(e.actionText),1)])),_:1},8,["style","class","onClick"])])),_:3},8,["onClick","style"])}],["__scopeId","data-v-25c04386"]]);const re=E({name:"u-subsection",mixins:[t,i,{props:{list:{type:Array,default:()=>e.subsection.list},current:{type:[String,Number],default:()=>e.subsection.current},activeColor:{type:String,default:()=>e.subsection.activeColor},inactiveColor:{type:String,default:()=>e.subsection.inactiveColor},mode:{type:String,default:()=>e.subsection.mode},fontSize:{type:[String,Number],default:()=>e.subsection.fontSize},bold:{type:Boolean,default:()=>e.subsection.bold},bgColor:{type:String,default:()=>e.subsection.bgColor},keyName:{type:String,default:()=>e.subsection.keyName}}}],data:()=>({itemRect:{width:0,height:0},innerCurrent:"",windowResizeCallback:{}}),watch:{list(e,t){this.init()},current:{immediate:!0,handler(e){e!==this.innerCurrent&&(this.innerCurrent=e)}}},computed:{wrapperStyle(){const e={};return"button"===this.mode&&(e.backgroundColor=this.bgColor),e},barStyle(){const e={};return e.width=`${this.itemRect.width}px`,e.height=`${this.itemRect.height}px`,e.transform=`translateX(${this.innerCurrent*this.itemRect.width}px)`,"subsection"===this.mode&&(e.backgroundColor=this.activeColor),e},itemStyle(e){return e=>{const t={};return"subsection"===this.mode&&(t.borderColor=this.activeColor,t.borderWidth="1px",t.borderStyle="solid"),t}},textStyle(e){return e=>{const t={};return t.fontWeight=this.bold&&this.innerCurrent===e?"bold":"normal",t.fontSize=n(this.fontSize),"subsection"===this.mode?t.color=this.innerCurrent===e?"#fff":this.inactiveColor:t.color=this.innerCurrent===e?this.activeColor:this.inactiveColor,t}}},mounted(){this.init(),this.windowResizeCallback=e=>{this.init()},x(this.windowResizeCallback)},beforeUnmount(){S(this.windowResizeCallback)},emits:["change"],methods:{addStyle:a,init(){this.innerCurrent=this.current,k().then((()=>this.getRect()))},getText(e){return"object"==typeof e?e[this.keyName]:e},getRect(){this.$uGetRect(".u-subsection__item--0").then((e=>{this.itemRect=e}))},clickHandler(e){this.innerCurrent=e,this.$emit("change",e)}}},[["render",function(e,t,i,a,n,o){const r=_,h=b;return s(),l(r,{class:f(["u-subsection",[`u-subsection--${e.mode}`]]),ref:"u-subsection",style:d([o.addStyle(e.customStyle),o.wrapperStyle])},{default:c((()=>[u(r,{class:f(["u-subsection__bar cursor-pointer",["button"===e.mode&&"u-subsection--button__bar",0===n.innerCurrent&&"subsection"===e.mode&&"u-subsection__bar--first",n.innerCurrent>0&&n.innerCurrent<e.list.length-1&&"subsection"===e.mode&&"u-subsection__bar--center",n.innerCurrent===e.list.length-1&&"subsection"===e.mode&&"u-subsection__bar--last"]]),ref:"u-subsection__bar",style:d([o.barStyle])},null,8,["style","class"]),(s(!0),w(C,null,I(e.list,((t,i)=>(s(),l(r,{class:f(["u-subsection__item cursor-pointer",[`u-subsection__item--${i}`,i<e.list.length-1&&"u-subsection__item--no-border-right",0===i&&"u-subsection__item--first",i===e.list.length-1&&"u-subsection__item--last"]]),ref_for:!0,ref:`u-subsection__item--${i}`,style:d([o.itemStyle(i)]),onClick:e=>o.clickHandler(i),key:i},{default:c((()=>[u(h,{class:"u-subsection__item__text",style:d([o.textStyle(i)])},{default:c((()=>[p(g(o.getText(t)),1)])),_:2},1032,["style"])])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-d213affa"]]),se={en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next","uni-pagination.piecePerPage":"piece/page"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"prxima","uni-pagination.piecePerPage":"Art��culo/P��gina"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante","uni-pagination.piecePerPage":"Articles/Pages"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页","uni-pagination.piecePerPage":"条/页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁","uni-pagination.piecePerPage":"條/頁"}},{t:le}=T(se);const ce=E({name:"UniPagination",emits:["update:modelValue","input","change","pageSizeChange"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},piecePerPageText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},showPageSize:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7},pageSizeRange:{type:Array,default:()=>[20,50,100,500]}},data:()=>({pageSizeIndex:0,currentIndex:1,paperData:[],pickerShow:!1}),computed:{piecePerPage(){return this.piecePerPageText||le("uni-pagination.piecePerPage")},prevPageText(){return this.prevText||le("uni-pagination.prevText")},nextPageText(){return this.nextText||le("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),i=Number(this.pageSize);return t&&i&&(e=Math.ceil(t/i)),e},paper(){const e=this.currentIndex,t=this.pagerCount,i=this.total,a=this.pageSize;let n=[],o=[],r=Math.ceil(i/a);for(let l=0;l<r;l++)n.push(l+1);o.push(1);const s=n[n.length-(t+1)/2];return n.forEach(((i,a)=>{(t+1)/2>=e?i<t+1&&i>1&&o.push(i):e+2<=s?i>e-(t+1)/2&&i<e+(t+1)/2&&o.push(i):(i>e-(t+1)/2||r-t<i)&&i<n[n.length-1]&&o.push(i)})),r>t?((t+1)/2>=e?o[o.length-1]="...":e+2<=s?(o[1]="...",o[o.length-1]="..."):o[1]="...",o.push(n[n.length-1])):(t+1)/2>=e||e+2<=s||(o.shift(),o.push(n[n.length-1])),o}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}},pageSizeIndex(e){this.$emit("pageSizeChange",this.pageSizeRange[e])}},methods:{pickerChange(e){this.pageSizeIndex=e.detail.value,this.pickerClick()},pickerClick(){const e=document.querySelector("body");if(!e)return;const t="uni-pagination-picker-show";this.pickerShow=!this.pickerShow,this.pickerShow?e.classList.add(t):setTimeout((()=>e.classList.remove(t)),300)},selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}},[["render",function(e,t,i,a,n,o){const d=b,h=H(r("uni-icons"),W),y=z,v=P,x=_;return s(),l(x,{class:"uni-pagination"},{default:c((()=>[!0===i.showPageSize||"true"===i.showPageSize?(s(),l(v,{key:0,class:"select-picker",mode:"selector",value:n.pageSizeIndex,range:i.pageSizeRange,onChange:o.pickerChange,onCancel:o.pickerClick,onClick:o.pickerClick},{default:c((()=>[u(y,{type:"default",size:"mini",plain:!0},{default:c((()=>[u(d,null,{default:c((()=>[p(g(i.pageSizeRange[n.pageSizeIndex])+" "+g(o.piecePerPage),1)])),_:1}),u(h,{class:"select-picker-icon",type:"arrowdown",size:"12",color:"#999"})])),_:1})])),_:1},8,["value","range","onChange","onCancel","onClick"])):m("",!0),u(x,{class:"uni-pagination__total is-phone-hide"},{default:c((()=>[p("共 "+g(i.total)+" 条",1)])),_:1}),u(x,{class:f(["uni-pagination__btn",1===n.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===n.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:o.clickLeft},{default:c((()=>[!0===i.showIcon||"true"===i.showIcon?(s(),l(h,{key:0,color:"#666",size:"16",type:"left"})):(s(),l(d,{key:1,class:"uni-pagination__child-btn"},{default:c((()=>[p(g(o.prevPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"]),u(x,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:c((()=>[u(x,{class:"uni-pagination__num-current"},{default:c((()=>[u(d,{class:"uni-pagination__num-current-text is-pc-hide current-index-text"},{default:c((()=>[p(g(n.currentIndex),1)])),_:1}),u(d,{class:"uni-pagination__num-current-text is-pc-hide"},{default:c((()=>[p("/"+g(o.maxPage||0),1)])),_:1}),(s(!0),w(C,null,I(o.paper,((e,t)=>(s(),l(x,{key:t,class:f([{"page--active":e===n.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:i=>o.selectPage(e,t)},{default:c((()=>[u(d,null,{default:c((()=>[p(g(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),u(x,{class:f(["uni-pagination__btn",n.currentIndex>=o.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":n.currentIndex===o.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:o.clickRight},{default:c((()=>[!0===i.showIcon||"true"===i.showIcon?(s(),l(h,{key:0,color:"#666",size:"16",type:"right"})):(s(),l(d,{key:1,class:"uni-pagination__child-btn"},{default:c((()=>[p(g(o.nextPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"])])),_:1})}],["__scopeId","data-v-9230c4fe"]]);const ue=E({name:"u-list-item",mixins:[t,i,{props:{anchor:{type:[String,Number],default:()=>e.listItem.anchor}}}],data:()=>({rect:{},index:0,show:!0,sys:$()}),computed:{},inject:["uList"],watch:{"uList.innerScrollTop"(e){const t=this.uList.preLoadScreen,i=this.sys.windowHeight;e<=i*t?this.parent.updateOffsetFromChild(0):this.rect.top<=e-i*t&&this.parent.updateOffsetFromChild(this.rect.top)}},created(){this.parent={}},mounted(){this.init()},methods:{init(){this.updateParentData(),this.index=this.parent.children.indexOf(this),this.resize()},updateParentData(){this.getParentData("u-list")},resize(){this.queryRect(`u-list-item-${this.anchor}`).then((e=>{const t=this.parent.children[this.index-1];this.rect=e;const i=this.uList.preLoadScreen,a=this.sys.windowHeight;t&&(this.rect.top=t.rect.top+t.rect.height),e.top>=this.uList.innerScrollTop+(1+i)*a&&(this.show=!1)}))},queryRect(e){return new Promise((t=>{this.$uGetRect(`.${e}`).then((e=>{t(e)}))}))}}},[["render",function(e,t,i,a,n,o){const r=_;return s(),l(r,{class:f(["u-list-item",[`u-list-item-${e.anchor}`]]),ref:`u-list-item-${e.anchor}`,anchor:`u-list-item-${e.anchor}`},{default:c((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["anchor","class"])}],["__scopeId","data-v-67a77f55"]]);const de=E({name:"u-list",mixins:[t,i,{props:{showScrollbar:{type:Boolean,default:()=>e.list.showScrollbar},lowerThreshold:{type:[String,Number],default:()=>e.list.lowerThreshold},upperThreshold:{type:[String,Number],default:()=>e.list.upperThreshold},scrollTop:{type:[String,Number],default:()=>e.list.scrollTop},offsetAccuracy:{type:[String,Number],default:()=>e.list.offsetAccuracy},enableFlex:{type:Boolean,default:()=>e.list.enableFlex},pagingEnabled:{type:Boolean,default:()=>e.list.pagingEnabled},scrollable:{type:Boolean,default:()=>e.list.scrollable},scrollIntoView:{type:String,default:()=>e.list.scrollIntoView},scrollWithAnimation:{type:Boolean,default:()=>e.list.scrollWithAnimation},enableBackToTop:{type:Boolean,default:()=>e.list.enableBackToTop},height:{type:[String,Number],default:()=>e.list.height},width:{type:[String,Number],default:()=>e.list.width},preLoadScreen:{type:[String,Number],default:()=>e.list.preLoadScreen}}}],watch:{scrollIntoView(e){this.scrollIntoViewById(e)}},data:()=>({innerScrollTop:0,offset:0,sys:$()}),computed:{listStyle(){const e={};return 0!=this.width&&(e.width=n(this.width)),0!=this.height&&(e.height=n(this.height)),e.height||(e.height=n(this.sys.windowHeight,"px")),N(e,a(this.customStyle))}},provide(){return{uList:this}},created(){this.refs=[],this.children=[],this.anchors=[]},mounted(){},emits:["scroll","scrolltolower","scrolltoupper"],methods:{updateOffsetFromChild(e){this.offset=e},onScroll(e){let t=0;t=e.detail.scrollTop,this.innerScrollTop=t,this.$emit("scroll",Math.abs(t))},scrollIntoViewById(e){},scrolltolower(e){k(30).then((()=>{this.$emit("scrolltolower")}))},scrolltoupper(e){k(30).then((()=>{this.$emit("scrolltoupper"),this.offset=0}))}}},[["render",function(e,t,i,a,n,o){const r=_,p=L;return s(),l(p,{class:"u-list","scroll-into-view":e.scrollIntoView,style:d([o.listStyle]),"scroll-y":e.scrollable,"scroll-top":Number(e.scrollTop),"lower-threshold":Number(e.lowerThreshold),"upper-threshold":Number(e.upperThreshold),"show-scrollbar":e.showScrollbar,"enable-back-to-top":e.enableBackToTop,"scroll-with-animation":e.scrollWithAnimation,onScroll:o.onScroll,onScrolltolower:o.scrolltolower,onScrolltoupper:o.scrolltoupper},{default:c((()=>[u(r,null,{default:c((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["scroll-into-view","style","scroll-y","scroll-top","lower-threshold","upper-threshold","show-scrollbar","enable-back-to-top","scroll-with-animation","onScroll","onScrolltolower","onScrolltoupper"])}],["__scopeId","data-v-d3e3f9f8"]]),he=E({__name:"index",setup(e){U((()=>{"notInDingTalk"!==ne.env.platform&&ne.biz.navigation.setTitle({title:"工单管理"})}));const t=R(0),i=R([]);function a(e){const t=i.value.find((t=>t.dictValue===e));return t.dictLabel?t.dictLabel:""}function n(e){let t="#5ac725";switch(e){case"1":t="#f56c6c";break;case"2":t="#f9ae3d";break;case"3":t="#3c9cff";break;default:t="#5ac725"}return t}ie().then((e=>{i.value=e.data}));const o=j({form:{pageNum:1,pageSize:10,state:0,processTypeQueryList:["ordinary_in","ordinary_up"],eventTitle:"",serviceType:"",total:0},stateList:[{name:"待办"},{name:"已办"},{name:"全部"}],serviceRange:[]}),{form:d,stateList:h,serviceRange:f}=B(o);function y(e){}!async function(){const{data:e}=await Y();f.value=e.map((e=>(e.text=e.dictLabel,e.value=e.dictCode,e)))}();const v=R(0),x=R(!1);function S(e){console.log(e,"滑动到底部"),x.value=!0}const k=R([]);async function T(){const{rows:e,total:t}=await Z({...d.value});k.value=e,d.value.total=t,V.hideLoading()}async function z(){const{rows:e,total:t}=await ee({...d.value});k.value=e,d.value.total=t,V.hideLoading()}async function P(){const{rows:e,total:t}=await Q({...d.value});k.value=e,d.value.total=t,V.hideLoading()}function $(e){V.showLoading({title:"加载中",mask:!0}),d.value.pageNum=e.current,0===t.value?T():1===t.value?z():P()}const N=e=>{k.value=[],d.value.pageNum=1,d.value.total=0,t.value=e,V.showLoading({title:"加载中",mask:!0}),0==t.value?T():1==t.value?z():2==t.value&&P()};return U((()=>{if(V.getStorageSync("navType")){let e=V.getStorageSync("navType");V.removeStorageSync("navType"),t.value=e.key2,console.log(t.value,"navType"),N(e.key2)}else N(2)})),A((()=>[d.value.eventTitle,d.value.serviceType]),(()=>{N(t.value)}),{deep:!0}),(e,i)=>{const o=H(r("up-search"),oe),x=H(r("uni-data-select"),M),T=H(r("up-subsection"),re),z=H(r("uni-pagination"),ce),L=H(r("up-tag"),q),R=H(r("up-line"),K),j=H(r("up-button"),G),B=H(r("uni-card"),J),A=H(r("up-list-item"),ue),D=b,U=_,E=H(r("up-list"),de);return s(),w("div",{class:"workorder_view"},[F("div",{class:"fixed-header"},[F("div",{class:"search_box"},[F("div",{class:"search_input"},[u(o,{height:"70rpx",searchIconSize:"30",placeholder:"搜索","show-action":!1,shape:"square",modelValue:O(d).eventTitle,"onUpdate:modelValue":i[0]||(i[0]=e=>O(d).eventTitle=e)},null,8,["modelValue"])]),F("div",{class:"search_select"},[u(x,{style:{"background-color":"transparent"},modelValue:O(d).serviceType,"onUpdate:modelValue":i[1]||(i[1]=e=>O(d).serviceType=e),localdata:O(f),placeholder:"工单业务"},null,8,["modelValue","localdata"])])]),F("div",{class:"state_box"},[u(T,{fontSize:"14px",list:O(h),onChange:N,current:t.value},null,8,["list","current"])]),u(z,{total:O(d).total,onChange:$,title:"标题文字"},null,8,["total"])]),F("div",{class:"content-wrapper"},[u(E,{onScrolltolower:S,onScroll:y,scrollTop:v.value},{default:c((()=>[(s(!0),w(C,null,I(k.value,((e,t)=>(s(),l(A,{key:t},{default:c((()=>[u(B,{style:{"background-color":"rgba(255, 255, 255, 0.8)",color:"blue !important"}},{default:c((()=>{return[F("div",{class:"workorder_item"},[u(L,{class:"workorder_tag",text:a(e.riskLevel),borderColor:n(e.riskLevel),bgColor:n(e.riskLevel)},null,8,["text","borderColor","bgColor"]),F("div",{class:"workorder_num"},"工单编号："+g(e.orderNo),1),F("div",{class:"workorder_title"},"标题："+g(e.eventTitle),1),u(R,{margin:"5px"}),F("div",{class:"workorder_content"},g((t=e.remark,t?t.replace(/<\/?[^>]+(>|$)/g,""):"")),1),F("div",{class:"workorder_date flex justify-between items-center"},[F("div",null,g(e.distributeTime),1),F("div",{class:"btn_box w-[100px]"},[F("div",{class:"btn_box flex gap-2 justify-end"},[e.toSign&&1==e.orderFlag?(s(),l(j,{key:0,size:"mini",style:{color:"aliceblue"},color:"#f56c6c",plain:"",text:"签收",onClick:t=>async function(e){const{code:t,data:i}=await X(e.id,e.taskId);if(200==t)return P(),void V.$u.toast("签收成功");V.$u.toast("提交失败，请稍后重试")}(e)},null,8,["onClick"])):m("",!0),1==e.orderFlag?(s(),l(j,{key:1,size:"mini",color:"#409eff",text:"查看/处理",onClick:t=>async function(e){te(e.id).then(function(t){if(null!=t&&0!=t.length){let i=e.leaderExamine,a={taskId:(e=t).taskId,processed:e.processed,businessKey:e.businessKey,processInstanceId:e.processInstanceId,handleValue:e.handleValue,handleType:e.handleType};if(ae("deptadmin")&&1==i){let e="/pages/workorder/leaderOrderDetail?params=";V.navigateTo({url:e+encodeURIComponent(JSON.stringify(a))})}else V.navigateTo({url:"/pages/workorder/orderDetail?params="+encodeURIComponent(JSON.stringify(a))})}}.bind(this)).catch((function(e){console.error(e)}))}(e)},null,8,["onClick"])):m("",!0)]),1===e.singMethod&&0==e.orderFlag?(s(),l(j,{key:0,size:"mini",color:"#f56c6c",text:"查看详情",onClick:t=>{return i=e.id,void V.navigateTo({url:"/pages/workorder/OrderInfo?id="+i});var i}},null,8,["onClick"])):m("",!0),2===e.singMethod&&0==e.orderFlag?(s(),l(j,{key:1,size:"mini",color:"#f56c6c",text:"地市查看详情",onClick:t=>{return i=e.id,void V.navigateTo({url:"/pages/workorder/OrderInfoCity?id="+i});var i}},null,8,["onClick"])):m("",!0)])])])];var t})),_:2},1024)])),_:2},1024)))),128)),u(U,{class:"bottom-text"},{default:c((()=>[u(D,null,{default:c((()=>[p("-------已经到底了-------")])),_:1})])),_:1})])),_:1},8,["scrollTop"])])])}}},[["__scopeId","data-v-8b453090"]]);export{he as default};

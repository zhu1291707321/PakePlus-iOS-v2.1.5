import{o as e,n as t,w as a,b as l,c as r,F as o,m as s,K as n,L as i,E as h,e as d,t as u,I as c,i as g,f as m,M as p,d as f}from"./index-634fa69d.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as y}from"./uni-app.es.78f2cdc8.js";const x=b({name:"u-message-input",props:{maxlength:{type:[Number,String],default:4},dotFill:{type:Boolean,default:!1},mode:{type:String,default:"box"},modelValue:{type:[String,Number],default:""},breathe:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},bold:{type:Boolean,default:!1},fontSize:{type:[String,Number],default:60},activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#606266"},width:{type:[Number,String],default:"80"},disabledKeyboard:{type:Boolean,default:!1}},watch:{modelValue:{immediate:!0,handler(e){e=String(e),this.valueModel=e.substring(0,this.maxlength)}}},data:()=>({valueModel:""}),emits:["change","finish"],computed:{animationClass(){return e=>this.breathe&&this.charArr.length==e?"u-breathe":""},charArr(){return this.valueModel.split("")},charArrLength(){return this.charArr.length},loopCharArr(){return new Array(this.maxlength)}},methods:{getVal(e){let{value:t}=e.detail;this.valueModel=t,String(t).length>this.maxlength||(this.$emit("change",t),String(t).length==this.maxlength&&this.$emit("finish",t))}}},[["render",function(p,f,b,y,x,v){const A=c,C=g,_=m;return e(),t(C,{class:"u-char-box"},{default:a((()=>[l(C,{class:"u-char-flex"},{default:a((()=>[l(A,{disabled:b.disabledKeyboard,value:x.valueModel,type:"number",focus:b.focus,maxlength:b.maxlength,class:"u-input",onInput:v.getVal},null,8,["disabled","value","focus","maxlength","onInput"]),(e(!0),r(o,null,s(v.loopCharArr,((s,c)=>(e(),t(C,{key:c},{default:a((()=>[l(C,{class:n([b.breathe&&v.charArrLength==c?"u-breathe":"","u-char-item",v.charArrLength===c&&"box"==b.mode?"u-box-active":"","box"===b.mode?"u-box":""]),style:i({fontWeight:b.bold?"bold":"normal",fontSize:b.fontSize+"rpx",width:b.width+"rpx",height:b.width+"rpx",color:b.inactiveColor,borderColor:v.charArrLength===c&&"box"==b.mode?b.activeColor:b.inactiveColor})},{default:a((()=>["middleLine"!==b.mode?(e(),t(C,{key:0,class:"u-placeholder-line",style:i({display:v.charArrLength===c?"block":"none",height:.5*b.width+"rpx"})},null,8,["style"])):h("",!0),"middleLine"===b.mode&&v.charArrLength<=c?(e(),t(C,{key:1,class:n([[b.breathe&&v.charArrLength==c?"u-breathe":"",v.charArrLength===c?"u-middle-line-active":""],"u-middle-line"]),style:i({height:b.bold?"4px":"2px",background:v.charArrLength===c?b.activeColor:b.inactiveColor})},null,8,["class","style"])):h("",!0),"bottomLine"===b.mode?(e(),t(C,{key:2,class:n([[b.breathe&&v.charArrLength==c?"u-breathe":"",v.charArrLength===c?"u-bottom-line-active":""],"u-bottom-line"]),style:i({height:b.bold?"4px":"2px",background:v.charArrLength===c?b.activeColor:b.inactiveColor})},null,8,["class","style"])):h("",!0),b.dotFill?(e(),t(_,{key:4,class:"u-dot"},{default:a((()=>[d(u(v.charArr[c]?"●":""),1)])),_:2},1024)):(e(),r(o,{key:3},[d(u(v.charArr[c]?v.charArr[c]:""),1)],64))])),_:2},1032,["class","style"])])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-8e923d37"]]);const v=b({data:()=>({maxlength:4,value:"",second:3,show:!1,error:!1}),computed:{},onLoad(){let e=setInterval((()=>{this.second--,this.second<=0&&(this.show=!0,4!=this.value.lenth&&(this.error=!0),clearInterval(e))}),1e3)},methods:{noCaptcha(){p({itemList:["重新获取验证码","接听语音验证码"],success:function(e){},fail:function(e){}})},change(e){},finish(e){}}},[["render",function(r,o,s,i,h,c){const p=g,b=y(f("up-message-input"),x),v=m;return e(),t(p,{class:"wrap"},{default:a((()=>[l(p,{class:"key-input"},{default:a((()=>[l(p,{class:"title"},{default:a((()=>[d("输入验证码")])),_:1}),l(p,{class:"tips"},{default:a((()=>[d("验证码已发送至 +150****9320")])),_:1}),l(b,{focus:!0,value:h.value,onChange:c.change,onFinish:c.finish,mode:"bottomLine",maxlength:h.maxlength},null,8,["value","onChange","onFinish","maxlength"]),l(v,{class:n({error:h.error})},{default:a((()=>[d("验证码错误，请重新输入")])),_:1},8,["class"]),l(p,{class:"captcha"},{default:a((()=>[l(v,{class:n({noCaptcha:h.show}),onClick:c.noCaptcha},{default:a((()=>[d("收不到验证码点这里")])),_:1},8,["class","onClick"]),l(v,{class:n({regain:!h.show})},{default:a((()=>[d(u(h.second)+"秒后重新获取验证码",1)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-574cb31b"]]);export{v as default};
